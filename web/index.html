<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Roguelike Survival</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <!-- 타이틀 화면 -->
        <div id="title-screen" class="screen">
            <div class="title-art">
<pre>
    _    ____   ____ ___ ___
   / \  / ___| / ___|_ _|_ _|
  / _ \ \___ \| |    | | | |
 / ___ \ ___) | |___ | | | |
/_/   \_\____/ \____|___|___|

 ____                        _ _ _
|  _ \ ___   __ _ _   _  ___| (_) | _____
| |_) / _ \ / _` | | | |/ _ \ | | |/ / _ \
|  _ < (_) | (_| | |_| |  __/ | |   <  __/
|_| \_\___/ \__, |\__,_|\___|_|_|_|\_\___|
            |___/
  ____                  _            _
 / ___| _   _ _ ____   _(_)_   ____ _| |
 \___ \| | | | '__\ \ / / \ \ / / _` | |
  ___) | |_| | |   \ V /| |\ V / (_| | |
 |____/ \__,_|_|    \_/ |_| \_/ \__,_|_|
</pre>
            </div>
            <div class="menu">
                <button onclick="game.newGame()">새 게임 시작</button>
                <button onclick="game.loadGame()">불러오기</button>
                <button onclick="game.showHelp()">도움말</button>
            </div>
            <div class="version">v1.0 - Nethack + Unreal World Style</div>
        </div>

        <!-- 게임 화면 -->
        <div id="game-screen" class="screen hidden">
            <!-- 모바일 상단 영역: 3D 뷰 + 상태창 -->
            <div id="mobile-top-area">
                <div id="mobile-3d-view">
                    <pre id="mobile-view3d"></pre>
                </div>
                <div id="mobile-status-panel">
                    <div class="mobile-stat">
                        <span class="stat-icon">♥</span>
                        <div class="mobile-bar-wrap">
                            <div id="mobile-hp-bar" class="mobile-bar hp"></div>
                        </div>
                        <span id="mobile-hp-text">30/30</span>
                    </div>
                    <div class="mobile-stat">
                        <span class="stat-icon">🍖</span>
                        <div class="mobile-bar-wrap">
                            <div id="mobile-hunger-bar" class="mobile-bar hunger"></div>
                        </div>
                        <span id="mobile-hunger-text">100%</span>
                    </div>
                    <div class="mobile-stat">
                        <span class="stat-icon">💧</span>
                        <div class="mobile-bar-wrap">
                            <div id="mobile-thirst-bar" class="mobile-bar thirst"></div>
                        </div>
                        <span id="mobile-thirst-text">100%</span>
                    </div>
                    <div id="mobile-info">
                        <span id="mobile-floor">B1F</span>
                        <span id="mobile-time">D1 08:00</span>
                        <span id="mobile-gold">💰100</span>
                    </div>
                    <div id="mobile-message"></div>
                </div>
            </div>

            <!-- 좌측 패널: 3D 뷰 (30%) - 데스크탑용 -->
            <div id="left-panel">
                <div class="view-header">
                    <span class="view-title">[ 1인칭 뷰 ]</span>
                    <button id="toggle-view-btn" onclick="game.toggleView()">V</button>
                </div>
                <div id="view3d-container">
                    <pre id="view3d-display"></pre>
                </div>
                <div id="compass-container">
                    <pre id="compass-display"></pre>
                    <span id="mini-direction"></span>
                </div>
                <div id="mini-status">
                    <span class="mini-hp">HP: <span id="mini-hp-text">30/30</span></span> |
                    <span class="mini-pos">위치: <span id="mini-pos-text">(0,0)</span></span>
                </div>
            </div>

            <!-- 우측 패널: 던전맵 + UI (70%) -->
            <div id="right-panel">
                <div id="view-container">
                    <!-- 2D 맵 -->
                    <div id="map-container">
                        <div class="view-header">
                            <span class="view-title">[ 던전 맵 ]</span>
                            <span id="floor-display">Floor 1</span>
                        </div>
                        <pre id="map-display"></pre>
                    </div>
                </div>
                <div id="ui-panel">
                    <div id="status-bar">
                        <div class="stat">
                            <span class="stat-label">HP:</span>
                            <div class="bar-container">
                                <div id="hp-bar" class="bar hp"></div>
                            </div>
                            <span id="hp-text">30/30</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">포만:</span>
                            <div class="bar-container">
                                <div id="hunger-bar" class="bar hunger"></div>
                            </div>
                            <span id="hunger-text">100%</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">수분:</span>
                            <div class="bar-container">
                                <div id="thirst-bar" class="bar thirst"></div>
                            </div>
                            <span id="thirst-text">100%</span>
                        </div>
                    </div>
                    <div id="info-bar">
                        <span id="time-display">Day 1, 08:00 (아침)</span>
                        <span id="turn-display">Turn: 0</span>
                        <span id="gold-display">Gold: 100</span>
                        <span id="position-display">(0, 0)</span>
                    </div>
                    <div id="message-log"></div>
                </div>
            </div>

            <!-- 모바일 터치 컨트롤 -->
            <div id="mobile-controls">
                <!-- 왼쪽: 9방향 키패드 (로그라이크 스타일) -->
                <div id="dpad-container">
                    <div class="dpad-9way">
                        <button class="dpad-btn" data-dir="up-left">↖</button>
                        <button class="dpad-btn" data-dir="up">↑</button>
                        <button class="dpad-btn" data-dir="up-right">↗</button>
                        <button class="dpad-btn" data-dir="left">←</button>
                        <button class="dpad-btn dpad-center" data-action="wait">·</button>
                        <button class="dpad-btn" data-dir="right">→</button>
                        <button class="dpad-btn" data-dir="down-left">↙</button>
                        <button class="dpad-btn" data-dir="down">↓</button>
                        <button class="dpad-btn" data-dir="down-right">↘</button>
                    </div>
                </div>
                <!-- 오른쪽: 기능키 -->
                <div id="action-container">
                    <button class="action-btn" data-action="pickup">줍기</button>
                    <button class="action-btn" data-action="inventory">가방</button>
                    <button class="action-btn" data-action="rest">휴식</button>
                    <button class="action-btn" data-action="stairs">계단</button>
                </div>
            </div>
        </div>

        <!-- 인벤토리 모달 -->
        <div id="inventory-modal" class="modal hidden">
            <div class="modal-content">
                <h2>인벤토리</h2>
                <div class="modal-help">[a-z] 사용 | [Shift+a-z] 버리기 | [ESC] 닫기</div>
                <div id="inventory-list"></div>
            </div>
        </div>

        <!-- 상점 모달 -->
        <div id="shop-modal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close-btn" onclick="game.closeShop()">✕</button>
                <h2 id="shop-title">상점</h2>
                <div class="modal-help">[b] 구매 | [s] 판매 | [ESC] 닫기</div>
                <div id="shop-inventory"></div>
            </div>
        </div>

        <!-- 대화 모달 -->
        <div id="dialogue-modal" class="modal hidden">
            <div class="modal-content">
                <h2 id="dialogue-npc-name">NPC</h2>
                <div id="dialogue-text"></div>
                <div id="dialogue-options"></div>
            </div>
        </div>

        <!-- 퀘스트 모달 -->
        <div id="quest-modal" class="modal hidden">
            <div class="modal-content">
                <h2>퀘스트 목록</h2>
                <div id="quest-list"></div>
            </div>
        </div>

        <!-- 종교 모달 -->
        <div id="religion-modal" class="modal hidden">
            <div class="modal-content">
                <h2>신앙</h2>
                <div id="religion-info"></div>
            </div>
        </div>

        <!-- 도움말 모달 -->
        <div id="help-modal" class="modal hidden">
            <div class="modal-content">
                <h2>조작법</h2>
                <div class="help-content">
                    <h3>이동</h3>
                    <p>방향키 또는 Numpad: 상하좌우 이동</p>
                    <p>7/9/1/3 또는 y/u/b/n: 대각선 이동</p>

                    <h3>행동</h3>
                    <p><kbd>g</kbd> 또는 <kbd>,</kbd> : 아이템 줍기</p>
                    <p><kbd>i</kbd> : 인벤토리</p>
                    <p><kbd>.</kbd> 또는 <kbd>5</kbd> : 대기</p>
                    <p><kbd>r</kbd> : 휴식</p>
                    <p><kbd>t</kbd> : NPC와 대화</p>
                    <p><kbd>p</kbd> : 기도</p>
                    <p><kbd>q</kbd> : 퀘스트 목록</p>
                    <p><kbd>></kbd> : 계단 내려가기</p>
                    <p><kbd><</kbd> : 계단 올라가기</p>

                    <h3>시스템</h3>
                    <p><kbd>S</kbd> : 저장</p>
                    <p><kbd>L</kbd> : 불러오기</p>
                    <p><kbd>v</kbd> : 뷰 전환 (3D/2D/분할)</p>
                    <p><kbd>?</kbd> : 도움말</p>
                    <p><kbd>ESC</kbd> : 창 닫기</p>

                    <h3>심볼</h3>
                    <pre>
@ = 당신          g = 고블린        o = 오크
% = 음식/시체     ! = 물약          > = 하강계단
. = 바닥          # = 벽            < = 상승계단
@ = NPC (노랑)    * = 모닥불        ~ = 물
                    </pre>
                </div>
                <button onclick="game.closeModal()">닫기 (ESC)</button>
            </div>
        </div>

        <!-- 게임 오버 -->
        <div id="gameover-screen" class="screen hidden">
            <div class="gameover-text">
                <h1>*** 당신은 죽었다 ***</h1>
                <p id="death-reason"></p>
                <div class="stats">
                    <p>생존 일수: <span id="final-days">0</span></p>
                    <p>총 턴: <span id="final-turns">0</span></p>
                    <p>처치한 적: <span id="final-kills">0</span></p>
                </div>
                <button onclick="game.newGame()">다시 시작</button>
                <button onclick="game.showTitle()">타이틀로</button>
            </div>
        </div>
    </div>

    <script src="weapons.js"></script>
    <script src="monster_patterns.js"></script>
    <script src="item_patterns.js"></script>
    <script src="view3d.js"></script>
    <script src="game.js"></script>
</body>
</html>
