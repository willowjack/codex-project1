/**
 * 아이템 ASCII 아트 패턴 정의
 *
 * monster_patterns.js와 분리하여 아이템 전용 패턴 관리
 *
 * 각 아이템은 5단계 크기의 패턴을 가집니다:
 *   5: 매우 가까움 (7x7)
 *   4: 가까움 (5x5)
 *   3: 보통 (3x3)
 *   2: 멀리 (2x2)
 *   1: 매우 멀리 (1x1)
 *
 * 의존성: monster_patterns.js (ASCII_PALETTE 사용)
 */

const ITEM_PATTERNS = {

    // =========================================================================
    // ===                      CONSUMABLES (소비품)                          ===
    // =========================================================================

    // -------------------------------------------------------------------------
    // 음식 (%) - Food
    // -------------------------------------------------------------------------
    '%': {
        name: '음식',
        color: '#8b4513',
        size: { height: 0.5, width: 0.5, weight: 0.5 },
        itemData: {
            itemType: 'food',
            rarity: 'common',
            value: 10,
            weight: 0.5,
            effect: 20,
            effectType: 'hunger',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                "  ▄▄▄  ",
                " █░░░█ ",
                " █ % █ ",
                " █░░░█ ",
                "  ▀▀▀  ",
                "       "
            ],
            4: [
                "     ",
                " ▄▄▄ ",
                " █%█ ",
                " ▀▀▀ ",
                "     "
            ],
            3: [
                "▄▄▄",
                "░%░",
                "▀▀▀"
            ],
            2: [
                "▄▄",
                "%%"
            ],
            1: [
                "%"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 음료/물병 (!) - Drinks
    // -------------------------------------------------------------------------
    '!': {
        name: '음료',
        color: '#4169e1',
        size: { height: 0.6, width: 0.3, weight: 0.3 },
        itemData: {
            itemType: 'drink',
            rarity: 'common',
            value: 5,
            weight: 0.5,
            effect: 30,
            effectType: 'thirst',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                "   █   ",
                "  ███  ",
                " █░░░█ ",
                " █ ! █ ",
                " █░░░█ ",
                "  ▀▀▀  "
            ],
            4: [
                "     ",
                "  █  ",
                " █░█ ",
                " █!█ ",
                "  ▀  "
            ],
            3: [
                " █ ",
                "█!█",
                " ▀ "
            ],
            2: [
                "█!",
                "▀▀"
            ],
            1: [
                "!"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 물약 (¡) - Potions
    // -------------------------------------------------------------------------
    '¡': {
        name: '물약',
        color: '#ff00ff',
        size: { height: 0.5, width: 0.3, weight: 0.2 },
        itemData: {
            itemType: 'potion',
            rarity: 'uncommon',
            value: 50,
            weight: 0.3,
            effect: 50,
            effectType: 'heal',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                "   ▄   ",
                "  █▓█  ",
                " █▓▓▓█ ",
                " █ ¡ █ ",
                " █▓▓▓█ ",
                "  ▀▀▀  "
            ],
            4: [
                "     ",
                "  ▄  ",
                " █▓█ ",
                " █¡█ ",
                "  ▀  "
            ],
            3: [
                " ▄ ",
                "█¡█",
                " ▀ "
            ],
            2: [
                "▓¡",
                "▀▀"
            ],
            1: [
                "¡"
            ]
        }
    },

    // =========================================================================
    // ===                        WEAPONS (무기)                             ===
    // =========================================================================

    // -------------------------------------------------------------------------
    // 근접 무기 ()) - Melee Weapons (Swords, Daggers, Axes, Maces)
    // -------------------------------------------------------------------------
    ')': {
        name: '근접 무기',
        color: '#c0c0c0',
        size: { height: 0.8, width: 0.3, weight: 1.0 },
        itemData: {
            itemType: 'weapon',
            rarity: 'common',
            value: 30,
            weight: 2.0,
            effect: 5,
            effectType: 'damage',
            stackable: false
        },
        patterns: {
            5: [
                "     ▄ ",
                "    █▀ ",
                "   █▀  ",
                "  █▀   ",
                "▄█▀    ",
                "██ )   ",
                " ▀     "
            ],
            4: [
                "    ▄",
                "  ▄█ ",
                " █▀  ",
                "██ ) ",
                " ▀   "
            ],
            3: [
                "  ▄",
                " █ ",
                "█) "
            ],
            2: [
                " ▄",
                "█)"
            ],
            1: [
                ")"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 창/지팡이 (/) - Spears, Staffs
    // -------------------------------------------------------------------------
    '/': {
        name: '창/지팡이',
        color: '#8b4513',
        size: { height: 1.2, width: 0.2, weight: 1.5 },
        itemData: {
            itemType: 'weapon',
            rarity: 'common',
            value: 70,
            weight: 2.5,
            effect: 6,
            effectType: 'damage',
            stackable: false
        },
        patterns: {
            5: [
                "      ▲",
                "     ▄█",
                "    ▄█ ",
                "   █▀  ",
                "  █▀   ",
                " █▀  / ",
                "▀▀     "
            ],
            4: [
                "    ▲",
                "   █ ",
                "  █  ",
                " █ / ",
                "▀    "
            ],
            3: [
                "  ▲",
                " █ ",
                "▀/ "
            ],
            2: [
                " ▲",
                "█/"
            ],
            1: [
                "/"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 활류 (}) - Bows, Crossbows
    // -------------------------------------------------------------------------
    '}': {
        name: '활',
        color: '#d2691e',
        size: { height: 0.9, width: 0.4, weight: 1.0 },
        itemData: {
            itemType: 'weapon',
            rarity: 'common',
            value: 50,
            weight: 1.5,
            effect: 4,
            effectType: 'damage',
            stackable: false
        },
        patterns: {
            5: [
                " ▄     ",
                "█░▀▄   ",
                "█░░░▀▄ ",
                "█░░░░░─",
                "█░░░▄▀ ",
                "█░▄▀ } ",
                " ▀     "
            ],
            4: [
                "▄    ",
                "█▀▄  ",
                "█░░─ ",
                "█▄▀} ",
                "▀    "
            ],
            3: [
                "█▄ ",
                "█─ ",
                "█▀}"
            ],
            2: [
                "█─",
                "█}"
            ],
            1: [
                "}"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 완드 (-) - Wands
    // -------------------------------------------------------------------------
    '-': {
        name: '완드',
        color: '#9370db',
        size: { height: 0.4, width: 0.1, weight: 0.3 },
        itemData: {
            itemType: 'weapon',
            rarity: 'uncommon',
            value: 150,
            weight: 0.5,
            effect: 5,
            effectType: 'magic_damage',
            stackable: false
        },
        patterns: {
            5: [
                "       ",
                "     ★ ",
                "    ▄▀ ",
                "   ▄▀  ",
                "  ▄▀   ",
                " ▄▀  - ",
                " ▀     "
            ],
            4: [
                "   ★ ",
                "  ▄▀ ",
                " ▄▀  ",
                " ▀ - ",
                "     "
            ],
            3: [
                " ★ ",
                "▄▀ ",
                "▀- "
            ],
            2: [
                "★-",
                "▀▀"
            ],
            1: [
                "-"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 화살/탄약 (|) - Ammunition
    // -------------------------------------------------------------------------
    '|': {
        name: '화살',
        color: '#8b4513',
        size: { height: 0.6, width: 0.1, weight: 0.1 },
        itemData: {
            itemType: 'ammo',
            rarity: 'common',
            value: 1,
            weight: 0.1,
            effect: 0,
            effectType: 'none',
            stackable: true
        },
        patterns: {
            5: [
                "   ▲   ",
                "   █   ",
                "   █   ",
                "   █   ",
                "   █   ",
                "  ◁█▷| ",
                "       "
            ],
            4: [
                "  ▲  ",
                "  █  ",
                "  █  ",
                " ◁█▷|",
                "     "
            ],
            3: [
                " ▲ ",
                " █ ",
                "◁█|"
            ],
            2: [
                "▲|",
                "█▷"
            ],
            1: [
                "|"
            ]
        }
    },

    // =========================================================================
    // ===                        ARMOR (방어구)                              ===
    // =========================================================================

    // -------------------------------------------------------------------------
    // 방어구 ([) - Armor
    // -------------------------------------------------------------------------
    '[': {
        name: '갑옷',
        color: '#708090',
        size: { height: 0.8, width: 0.6, weight: 5.0 },
        itemData: {
            itemType: 'armor',
            rarity: 'common',
            value: 50,
            weight: 5.0,
            effect: 3,
            effectType: 'defense',
            stackable: false
        },
        patterns: {
            5: [
                "  ▄▄▄  ",
                " █░░░█ ",
                "██░░░██",
                "█░███░█",
                "█░[ ]░█",
                " █░░░█ ",
                "  ▀▀▀  "
            ],
            4: [
                " ▄▄▄ ",
                "█░░░█",
                "█░█░█",
                "█░[░█",
                " ▀▀▀ "
            ],
            3: [
                "▄█▄",
                "█[█",
                "▀▀▀"
            ],
            2: [
                "▄▄",
                "[["
            ],
            1: [
                "["
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 방패 (]) - Shields
    // -------------------------------------------------------------------------
    ']': {
        name: '방패',
        color: '#b8860b',
        size: { height: 0.7, width: 0.5, weight: 3.0 },
        itemData: {
            itemType: 'shield',
            rarity: 'common',
            value: 30,
            weight: 3.0,
            effect: 2,
            effectType: 'defense',
            stackable: false
        },
        patterns: {
            5: [
                " ▄███▄ ",
                "██░░░██",
                "█░░░░░█",
                "█░ ] ░█",
                " █░░░█ ",
                "  █░█  ",
                "   ▀   "
            ],
            4: [
                "▄███▄",
                "█░░░█",
                "█ ] █",
                " █░█ ",
                "  ▀  "
            ],
            3: [
                "▄█▄",
                "█]█",
                " ▀ "
            ],
            2: [
                "▄▄",
                "]]"
            ],
            1: [
                "]"
            ]
        }
    },

    // =========================================================================
    // ===                      VALUABLES (귀중품)                            ===
    // =========================================================================

    // -------------------------------------------------------------------------
    // 금화 (*) - Gold
    // -------------------------------------------------------------------------
    '*': {
        name: '금화',
        color: '#ffd700',
        size: { height: 0.2, width: 0.2, weight: 0.1 },
        itemData: {
            itemType: 'gold',
            rarity: 'common',
            value: 1,
            weight: 0.01,
            effect: 0,
            effectType: 'none',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                "  ▄▄▄  ",
                " █▀▀▀█ ",
                " █ * █ ",
                " █▄▄▄█ ",
                "  ▀▀▀  ",
                "       "
            ],
            4: [
                "     ",
                " ▄▄▄ ",
                " █*█ ",
                " ▀▀▀ ",
                "     "
            ],
            3: [
                "▄▄▄",
                "█*█",
                "▀▀▀"
            ],
            2: [
                "★*",
                "**"
            ],
            1: [
                "*"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 보석/재료 ($) - Gems, Materials
    // -------------------------------------------------------------------------
    '$': {
        name: '보석',
        color: '#00ff7f',
        size: { height: 0.3, width: 0.3, weight: 0.2 },
        itemData: {
            itemType: 'gem',
            rarity: 'rare',
            value: 100,
            weight: 0.2,
            effect: 0,
            effectType: 'none',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                "   ▲   ",
                "  ◆◆◆  ",
                " ◆ $ ◆ ",
                "  ◆◆◆  ",
                "   ▼   ",
                "       "
            ],
            4: [
                "     ",
                "  ▲  ",
                " ◆$◆ ",
                "  ▼  ",
                "     "
            ],
            3: [
                " ◆ ",
                "◆$◆",
                " ◆ "
            ],
            2: [
                "◆$",
                "$◆"
            ],
            1: [
                "$"
            ]
        }
    },

    // =========================================================================
    // ===                        MAGIC (마법)                               ===
    // =========================================================================

    // -------------------------------------------------------------------------
    // 스크롤 (~) - Scrolls
    // -------------------------------------------------------------------------
    '~': {
        name: '스크롤',
        color: '#f5deb3',
        size: { height: 0.4, width: 0.3, weight: 0.1 },
        itemData: {
            itemType: 'scroll',
            rarity: 'uncommon',
            value: 80,
            weight: 0.1,
            effect: 1,
            effectType: 'magic',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                " ▄████▄",
                " █░░░░█",
                " █░~░░█",
                " █░░░░█",
                " ▀████▀",
                "       "
            ],
            4: [
                "     ",
                "▄███▄",
                "█░~░█",
                "▀███▀",
                "     "
            ],
            3: [
                "▄█▄",
                "░~░",
                "▀█▀"
            ],
            2: [
                "▄▄",
                "~~"
            ],
            1: [
                "~"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 책 (+) - Books, Tomes
    // -------------------------------------------------------------------------
    '+': {
        name: '책',
        color: '#8b0000',
        size: { height: 0.4, width: 0.3, weight: 0.5 },
        itemData: {
            itemType: 'book',
            rarity: 'uncommon',
            value: 60,
            weight: 0.5,
            effect: 0,
            effectType: 'knowledge',
            stackable: false
        },
        patterns: {
            5: [
                "       ",
                " ▄▄▄▄▄ ",
                " █░░░█ ",
                " █░+░█ ",
                " █░░░█ ",
                " █████ ",
                "       "
            ],
            4: [
                "     ",
                "▄▄▄▄▄",
                "█░+░█",
                "█████",
                "     "
            ],
            3: [
                "▄▄▄",
                "█+█",
                "███"
            ],
            2: [
                "▄▄",
                "++"
            ],
            1: [
                "+"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 성배/성물 (&) - Holy Relics
    // -------------------------------------------------------------------------
    '&': {
        name: '성물',
        color: '#ffd700',
        size: { height: 0.5, width: 0.3, weight: 0.5 },
        itemData: {
            itemType: 'relic',
            rarity: 'legendary',
            value: 1000,
            weight: 0.5,
            effect: 100,
            effectType: 'holy',
            stackable: false
        },
        patterns: {
            5: [
                "   ★   ",
                "  ███  ",
                " █░░░█ ",
                " █ & █ ",
                "  ███  ",
                "   █   ",
                "  ███  "
            ],
            4: [
                "  ★  ",
                " ███ ",
                " █&█ ",
                "  █  ",
                " ███ "
            ],
            3: [
                " ★ ",
                "█&█",
                " █ "
            ],
            2: [
                "★&",
                "██"
            ],
            1: [
                "&"
            ]
        }
    },

    // =========================================================================
    // ===                       UTILITY (유틸리티)                           ===
    // =========================================================================

    // -------------------------------------------------------------------------
    // 열쇠/반지 (=) - Keys, Rings
    // -------------------------------------------------------------------------
    '=': {
        name: '열쇠',
        color: '#daa520',
        size: { height: 0.3, width: 0.2, weight: 0.1 },
        itemData: {
            itemType: 'key',
            rarity: 'uncommon',
            value: 20,
            weight: 0.1,
            effect: 0,
            effectType: 'none',
            stackable: true
        },
        patterns: {
            5: [
                "       ",
                " ▄██▄  ",
                " █  █  ",
                " ▀██▀──",
                "   █ = ",
                "  ─┴─  ",
                "       "
            ],
            4: [
                "     ",
                " ▄█▄ ",
                " ▀█▀─",
                "  █= ",
                "  ─  "
            ],
            3: [
                "▄█▄",
                "▀█─",
                " = "
            ],
            2: [
                "○─",
                "=="
            ],
            1: [
                "="
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 계단/출구 (>) - Stairs, Exit
    // -------------------------------------------------------------------------
    '>': {
        name: '계단',
        color: '#a0a0a0',
        size: { height: 0.5, width: 0.5, weight: 0.0 },
        itemData: {
            itemType: 'stairs',
            rarity: 'common',
            value: 0,
            weight: 0.0,
            effect: 0,
            effectType: 'none',
            stackable: false
        },
        patterns: {
            5: [
                "       ",
                "▄▄▄▄▄▄▄",
                " ▀▀▀▀▀ ",
                "  ▄▄▄  ",
                "   > ▀ ",
                "    ▄  ",
                "     ▀ "
            ],
            4: [
                "▄▄▄▄▄",
                " ▀▀▀ ",
                "  > ▀",
                "   ▄ ",
                "    ▀"
            ],
            3: [
                "▀▀▀",
                " > ",
                "  ▀"
            ],
            2: [
                "▀▀",
                ">▀"
            ],
            1: [
                ">"
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 도구 (() - Tools (Torch, Pickaxe, etc.)
    // -------------------------------------------------------------------------
    '(': {
        name: '도구',
        color: '#cd853f',
        size: { height: 0.6, width: 0.3, weight: 1.0 },
        itemData: {
            itemType: 'tool',
            rarity: 'common',
            value: 25,
            weight: 1.0,
            effect: 0,
            effectType: 'utility',
            stackable: false
        },
        patterns: {
            5: [
                "    ◆  ",
                "   ███ ",
                "   █░█ ",
                "   █░█ ",
                "   █░█ ",
                "   █( ",
                "    ▀  "
            ],
            4: [
                "  ◆  ",
                " ███ ",
                "  █  ",
                "  █( ",
                "  ▀  "
            ],
            3: [
                " ◆ ",
                " █ ",
                " ( "
            ],
            2: [
                "◆(",
                "██"
            ],
            1: [
                "("
            ]
        }
    },

    // -------------------------------------------------------------------------
    // 가방/용기 ({) - Containers, Bags
    // -------------------------------------------------------------------------
    '{': {
        name: '가방',
        color: '#8b4513',
        size: { height: 0.5, width: 0.4, weight: 0.5 },
        itemData: {
            itemType: 'container',
            rarity: 'common',
            value: 15,
            weight: 0.5,
            effect: 0,
            effectType: 'storage',
            stackable: false
        },
        patterns: {
            5: [
                "       ",
                "  ▄▄▄  ",
                " █▀▀▀█ ",
                "██░░░██",
                "█░ { ░█",
                " █░░░█ ",
                "  ▀▀▀  "
            ],
            4: [
                "     ",
                " ▄▄▄ ",
                "█░░░█",
                "█░{░█",
                " ▀▀▀ "
            ],
            3: [
                "▄▄▄",
                "█{█",
                "▀▀▀"
            ],
            2: [
                "▄▄",
                "{{"
            ],
            1: [
                "{"
            ]
        }
    }
};

// 아이템 카테고리
const ITEM_CATEGORIES = {
    consumables: ['%', '!', '¡'],        // 음식, 음료, 물약
    weapons: [')', '/', '}', '-'],       // 근접무기, 창/지팡이, 활, 완드
    ammunition: ['|'],                    // 화살/탄약
    armor: ['[', ']'],                   // 갑옷, 방패
    valuables: ['*', '$'],               // 금화, 보석
    magic: ['~', '+', '&'],              // 스크롤, 책, 성물
    utility: ['=', '>', '(', '{']        // 열쇠, 계단, 도구, 가방
};

// 아이템 문자 목록
const ITEM_CHARS = ['%', '!', '¡', ')', '/', '}', '-', '|', '[', ']', '*', '~', '=', '>', '(', '$', '+', '&', '{'];

// 전역으로 내보내기
if (typeof window !== 'undefined') {
    window.ITEM_PATTERNS = ITEM_PATTERNS;
    window.ITEM_CATEGORIES = ITEM_CATEGORIES;
    window.ITEM_CHARS = ITEM_CHARS;

    // MONSTER_PATTERNS에 아이템 패턴 병합 (호환성 유지)
    if (window.MONSTER_PATTERNS) {
        Object.assign(window.MONSTER_PATTERNS, ITEM_PATTERNS);
    }
}

// Node.js 환경 지원
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { ITEM_PATTERNS, ITEM_CATEGORIES, ITEM_CHARS };
}
